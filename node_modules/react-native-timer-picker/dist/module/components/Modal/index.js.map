{"version":3,"names":["React","useCallback","useEffect","useRef","Animated","Easing","Modal","ReactNativeModal","TouchableWithoutFeedback","useWindowDimensions","styles","children","onOverlayPress","onHide","isVisible","animationDuration","overlayOpacity","modalProps","contentStyle","overlayStyle","testID","width","screenWidth","height","screenHeight","isMounted","animatedOpacity","Value","current","show","backdropAnimatedStyle","opacity","interpolate","inputRange","outputRange","contentAnimatedStyle","transform","translateY","extrapolate","timing","easing","inOut","quad","useNativeDriver","duration","toValue","start","hide","createElement","_extends","transparent","animationType","visible","onPress","View","style","backdrop","content","pointerEvents","memo"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport {\n    Animated,\n    Easing,\n    Modal as ReactNativeModal,\n    TouchableWithoutFeedback,\n    useWindowDimensions,\n} from \"react-native\";\n\nimport { styles } from \"./Modal.styles\";\n\ninterface ModalProps {\n    children?: React.ReactElement;\n    onOverlayPress?: () => void;\n    onHide?: () => void;\n    isVisible?: boolean;\n    animationDuration?: number;\n    overlayOpacity?: number;\n    modalProps?: any;\n    contentStyle?: any;\n    overlayStyle?: any;\n    testID?: string;\n}\n\nexport const Modal = ({\n    children,\n    onOverlayPress,\n    onHide,\n    isVisible = false,\n    animationDuration = 300,\n    overlayOpacity = 0.4,\n    modalProps,\n    contentStyle,\n    overlayStyle,\n    testID = \"modal\",\n}: ModalProps): React.ReactElement => {\n    const { width: screenWidth, height: screenHeight } = useWindowDimensions();\n\n    const isMounted = useRef(false);\n    const animatedOpacity = useRef(new Animated.Value(0));\n\n    useEffect(() => {\n        isMounted.current = true;\n        if (isVisible) {\n            show();\n        }\n\n        return () => {\n            isMounted.current = false;\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const backdropAnimatedStyle = {\n        opacity: animatedOpacity.current.interpolate({\n            inputRange: [0, 1],\n            outputRange: [0, overlayOpacity],\n        }),\n    };\n    const contentAnimatedStyle = {\n        transform: [\n            {\n                translateY: animatedOpacity.current.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [screenHeight, 0],\n                    extrapolate: \"clamp\",\n                }),\n            },\n        ],\n    };\n\n    const show = useCallback(() => {\n        Animated.timing(animatedOpacity.current, {\n            easing: Easing.inOut(Easing.quad),\n            // Using native driver in the modal makes the content flash\n            useNativeDriver: true,\n            duration: animationDuration,\n            toValue: 1,\n        }).start();\n    }, [animationDuration]);\n\n    const hide = useCallback(() => {\n        Animated.timing(animatedOpacity.current, {\n            easing: Easing.inOut(Easing.quad),\n            // Using native driver in the modal makes the content flash\n            useNativeDriver: true,\n            duration: animationDuration,\n            toValue: 0,\n        }).start(() => {\n            if (isMounted.current) {\n                onHide?.();\n            }\n        });\n    }, [animationDuration, onHide]);\n\n    useEffect(() => {\n        if (isVisible) {\n            show();\n        } else {\n            hide();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isVisible]);\n\n    return (\n        <ReactNativeModal\n            transparent\n            animationType=\"fade\"\n            visible={isVisible}\n            {...modalProps}\n            testID={testID}>\n            <TouchableWithoutFeedback\n                onPress={onOverlayPress}\n                testID=\"modal-backdrop\">\n                <Animated.View\n                    style={[\n                        styles.backdrop,\n                        backdropAnimatedStyle,\n                        { width: screenWidth, height: screenHeight },\n                        overlayStyle,\n                    ]}\n                />\n            </TouchableWithoutFeedback>\n            <Animated.View\n                style={[styles.content, contentAnimatedStyle, contentStyle]}\n                pointerEvents=\"box-none\">\n                {children}\n            </Animated.View>\n        </ReactNativeModal>\n    );\n};\n\nexport default React.memo(Modal);\n"],"mappings":"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"}